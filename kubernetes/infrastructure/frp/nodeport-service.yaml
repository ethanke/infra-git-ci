apiVersion: v1
kind: Service
metadata:
  name: frps-nodeport-external
  namespace: frp
  labels:
    app: frps
  annotations:
    description: "frp server external access via NodePort (bypasses LoadBalancer limits)"
spec:
  type: NodePort
  selector:
    app: frps
  ports:
    - name: frp-control
      protocol: TCP
      port: 7000
      targetPort: 7000
      nodePort: 30070  # FRP control port
    - name: tunnel-15000
      protocol: TCP
      port: 15000
      targetPort: 15000
      nodePort: 30150  # TCP tunnel port 1
    - name: tunnel-15001
      protocol: TCP
      port: 15001
      targetPort: 15001
      nodePort: 30151  # TCP tunnel port 2
    - name: tunnel-udp-16000
      protocol: UDP
      port: 16000
      targetPort: 16000
      nodePort: 30160  # UDP tunnel port 1
    - name: tunnel-udp-16001
      protocol: UDP
      port: 16001
      targetPort: 16001
      nodePort: 30161  # UDP tunnel port 2
  sessionAffinity: ClientIP
