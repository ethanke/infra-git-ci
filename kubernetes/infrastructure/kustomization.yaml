# Infrastructure Kustomization
# Defines all cluster-level infrastructure components

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Core infrastructure
  - sources/
  - cert-issuers/
  
  # Observability stack
  - observability/namespace.yaml
  # TEMPORARILY DISABLED: prometheus stack failing on admission webhook pre-install
  # - observability/prometheus/
  - observability/loki/
  - observability/tempo/
  # TEMPORARILY DISABLED: promtail depends on prometheus stack
  # - observability/promtail/
  - observability/grafana/
  
  # Databases
  - databases/
  
  # Git hosting & CI
  # - gitea/
  
  # Tunnel service (lrok backend)
  # TEMPORARILY DISABLED: frp-auth-plugin:v1.5.0 image not available in registry
  # - frp/
  
  # # Ingress & Certificates
  # - cert-manager/
  # - cert-manager-porkbun/
  # - traefik/
  
  # # DNS automation
  # - external-dns/
  
  # # Storage
  # - longhorn/
  
  # # Registry
  # - registry/
  
  # # Secrets management
  # - external-secrets/
  
  # # Network security
  # - network-policies/
